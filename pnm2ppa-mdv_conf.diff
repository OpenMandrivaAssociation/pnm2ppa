--- Makefile	2002-11-16 00:29:29.000000000 +0100
+++ Makefile.oden	2007-08-13 16:13:05.000000000 +0200
@@ -5,13 +5,14 @@
 # paths to locations where the pnm2ppa binary, the configuration file,
 # and the man page should be installed.   On some systems (like Solaris)
 # the install command requires the syntax BINDIR="-f /usr/local/bin".
-BINDIR="/usr/local/bin"
-CONFDIR="/etc"
-MANDIR="/usr/local/man/man1"
+BINDIR=/usr/bin
+CONFDIR=/etc
+MANDIR=/usr/share/man/man1
+DESTDIR=
 
 #compiler and linker options:
 CC=gcc
-CFLAGS=-Wall -pedantic -O2  
+CFLAGS=$(RPM_OPT_FLAGS)
 LDFLAGS=-lm
 
 INSTALL=install
@@ -104,25 +105,25 @@
 
 
 install: pnm2ppa calibrate_ppa
-	$(INSTALLD) $(BINDIR)
-	$(INSTALLD) $(CONFDIR)
-	$(INSTALLD) $(MANDIR)
-	$(INSTALL) -m 755 pnm2ppa  $(BINDIR)
-	$(INSTALL) -m 644 docs/en/pnm2ppa.1 $(MANDIR)
+	$(INSTALLD) $(DESTDIR)$(BINDIR)
+	$(INSTALLD) $(DESTDIR)$(CONFDIR)
+	$(INSTALLD) $(DESTDIR)$(MANDIR)
+	$(INSTALL) -m 755 pnm2ppa  $(DESTDIR)$(BINDIR)
+	$(INSTALL) -m 644 docs/en/pnm2ppa.1 $(DESTDIR)$(MANDIR)
 # development only - allows root to edit
-	$(INSTALL) -m 644 pnm2ppa.conf  $(CONFDIR)
+	$(INSTALL) -m 644 pnm2ppa.conf $(DESTDIR)$(CONFDIR)
 # calibration tool
-	$(INSTALL) -m 755 calibrate_ppa $(BINDIR) 
+	$(INSTALL) -m 755 calibrate_ppa $(DESTDIR)$(BINDIR) 
 # final production - much tighter
 #	$(INSTALL) -m 444 pnm2ppa.conf $(CONFDIR)
 	@@echo 
 	@@echo Now, edit /etc/pnm2ppa.conf to choose your printer
 
 uninstall: 
-	rm -f $(BINDIR)/pnm2ppa
-	rm -f $(BINDIR)/calibrate_ppa
-	rm -f $(MANDIR)/pnm2ppa.1
-	rm -f $(CONFDIR)/pnm2ppa.conf
+	rm -f $(DESTDIR)$(BINDIR)/pnm2ppa
+	rm -f $(DESTDIR)$(BINDIR)/calibrate_ppa
+	rm -f $(DESTDIR)$(MANDIR)/pnm2ppa.1
+	rm -f $(DESTDIR)$(CONFDIR)/pnm2ppa.conf
 
 pnm2ppa: $(OBJS) 
 	$(CC) $(LDFLAGS) $(CFLAGS) -o pnm2ppa $(OBJS)
